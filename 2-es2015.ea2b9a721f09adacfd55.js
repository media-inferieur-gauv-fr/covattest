(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{gxxk:function(t,e,i){"use strict";i.d(e,"a",function(){return u});var a=i("mrSG"),n=i("fXoL"),o=i("TEn/"),s=i("gZKt"),r=i("ogpO"),c=i("0hV+");let l=(()=>{class t{constructor(t,e,i){this.modalCtrl=t,this.loadingService=e,this.varGlobal=i,this.qrcodewitdh=.9*window.screen.availWidth,this.qrCodeData=null}ngOnInit(){this.qrCodeData="Cree le : "+this.toDayFr+" a "+this.timeBackH+";\nNom : "+this.varGlobal.setting.lastname+";\nPrenom: "+this.varGlobal.setting.firstname+";\nNaissance: "+this.dateOfBirthFrLong+" a "+this.varGlobal.setting.cityofbird+";\nAdresse: "+this.varGlobal.setting.adress+" "+this.varGlobal.setting.zipcode+" "+this.varGlobal.setting.city+" ;\nSortie: "+this.toDayFr+" a "+this.timeBackColon+";\nMotifs: "+this.activityName,this.loadingService.hide()}pageRendered(t){this.loadingService.hide()}closeModal(){this.modalCtrl.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(o.G),n.Kb(s.a),n.Kb(r.a))},t.\u0275cmp=n.Eb({type:t,selectors:[["app-attestation-tap"]],inputs:{activityName:"activityName",data:"data",dateOfBirth:"dateOfBirth",dateOfBirthFrLong:"dateOfBirthFrLong",toDayFr:"toDayFr",toDayFrLong:"toDayFrLong",timeBackT:"timeBackT",timeBackH:"timeBackH",timeBackColon:"timeBackColon"},decls:25,vars:16,consts:[["slot","start"],[3,"click"],["id","group"],[1,"qrcodeImg",3,"width","qrdata","margin","elementType"],["id","informations"]],template:function(t,e){1&t&&(n.Pb(0,"section"),n.Pb(1,"ion-buttons",0),n.Pb(2,"ion-button",1),n.Xb("click",function(){return e.closeModal()}),n.mc(3,"Fermer"),n.Ob(),n.Ob(),n.Pb(4,"ion-content"),n.Pb(5,"div",2),n.Pb(6,"div"),n.Lb(7,"qrcode",3),n.Ob(),n.Pb(8,"div",4),n.Pb(9,"p"),n.mc(10),n.Lb(11,"br"),n.mc(12),n.Lb(13,"br"),n.mc(14),n.Lb(15,"br"),n.mc(16),n.Lb(17,"br"),n.mc(18),n.Lb(19,"br"),n.mc(20),n.Lb(21,"br"),n.mc(22),n.Lb(23,"br"),n.mc(24),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&t&&(n.zb(7),n.cc("width",e.qrcodewitdh)("qrdata",e.qrCodeData)("margin",1)("elementType","img"),n.zb(3),n.oc(" Cr\xe9\xe9 le ",e.toDayFrLong," \xe0 ",e.timeBackColon,""),n.zb(2),n.nc(" Nom : ",e.varGlobal.setting.lastname,""),n.zb(2),n.nc(" Pr\xe9nom : ",e.varGlobal.setting.firstname,""),n.zb(2),n.oc(" Naissance : ",e.dateOfBirthFrLong," \xe0 ",e.varGlobal.setting.cityofbird,""),n.zb(2),n.nc(" Adresse : ",e.varGlobal.setting.adress,""),n.zb(2),n.oc("",e.varGlobal.setting.zipcode," ",e.varGlobal.setting.city,""),n.zb(2),n.oc(" Sortie : ",e.toDayFrLong," \xe0 ",e.timeBackColon,""),n.zb(2),n.nc(" Code motif: ",e.activityName," "))},directives:[o.c,o.b,o.i,c.a],styles:["section[_ngcontent-%COMP%]{font-size:1em;height:100vh}section[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{margin:5% 0 0}section[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:.9em;color:#f0f8ff;text-transform:none}section[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   #group[_ngcontent-%COMP%]{margin-top:5%;display:flex;flex-wrap:nowrap;flex-direction:column;justify-content:flex-start;text-align:center}section[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   #group[_ngcontent-%COMP%]   #informations[_ngcontent-%COMP%]{margin:auto;color:#f0f8ff;text-align:center;max-width:90%}"]}),t})();var d=i("IkSl");let b=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.loadingService=e}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){})}pageRendered(t){this.loadingService.hide()}closeModal(){this.modalCtrl.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(o.G),n.Kb(s.a))},t.\u0275cmp=n.Eb({type:t,selectors:[["attestationPdf"]],inputs:{pdfUrl:"pdfUrl"},decls:4,vars:5,consts:[[1,"ion-page"],["color","black",3,"click"],["size","large","name","close-circle-outline"],[3,"src","render-text","show-all","original-size","autoresize","page-rendered"]],template:function(t,e){1&t&&(n.Pb(0,"div",0),n.Pb(1,"ion-buttons",1),n.Xb("click",function(){return e.closeModal()}),n.Lb(2,"ion-icon",2),n.Ob(),n.Pb(3,"pdf-viewer",3),n.Xb("page-rendered",function(t){return e.pageRendered(t)}),n.Ob(),n.Ob()),2&t&&(n.zb(3),n.cc("src",e.pdfUrl)("render-text",!1)("show-all",!0)("original-size",!1)("autoresize",!0))},directives:[o.c,o.m,d.a],styles:[".ion-page[_ngcontent-%COMP%]{background-color:#dedcdc}.ion-page[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{font-size:large;position:absolute;color:transparent}.ion-page[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:grey}.ion-page[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%]{display:block;height:100vh}"]}),t})();i("gcOT");var h=i("ofXK"),g=i("OvJz");let f=(()=>{class t{constructor(t,e,i,a,n){this._varGlobal=t,this.modalCtrl=e,this._datePipe=i,this._timeBackPipe=a,this.loading=n,this.toDay=new Date}modifyPdf(t,e){return Object(a.a)(this,void 0,void 0,function*(){const a=yield i.e(14).then(i.bind(null,"4Zil")).then(({PDFDocument:t,StandardFonts:e})=>({PDFDocument:t,StandardFonts:e}));let n;n=e<20?"./assets/pdf/curfew-certificate.40bf5adf.pdf":"./assets/pdf/quarantine-certificate.1f118cea.pdf";const o=yield fetch(n).then(t=>t.arrayBuffer()),s=t,r=yield a.PDFDocument.load(o),[c]=yield r.embedPdf(s),l=yield r.embedFont(a.StandardFonts.Helvetica),d=r.getPageCount();r.getPages()[0].getSize(),r.setTitle("COVID-19 - D\xe9claration de d\xe9placement");let h=73;const g=r.getPage(0),f=c.scale(.3),m=c.scale(1.1),p=(t,e,i,a=11)=>{this.page.drawText(t,{x:e,y:i,size:a,font:l})};if(e<20){this.page=g,g.drawPage(c,Object.assign(Object.assign({},f),{x:g.getWidth()-f.width+60,y:g.getHeight()-f.height-660}));const t=r.addPage();t.drawPage(c,Object.assign(Object.assign({},m),{x:t.getWidth()-m.width+80,y:t.getHeight()-m.height-50}));const e=this._varGlobal.setting.firstname+" "+this._varGlobal.setting.lastname,i=this._varGlobal.setting.adress+" "+this._varGlobal.setting.zipcode+" "+this._varGlobal.setting.city,a=this._datePipe.transform(this._varGlobal.setting.dateOfBirth,"dd/MM/yyyy").toString();p(e,148,704),p(a,148,684),p(this._varGlobal.setting.cityofbird,311,684),p(i,152,667),p("Fait \xe0 ",73,113),p(this._varGlobal.setting.city,106,113),p("Le "+this._datePipe.transform(this.toDay,"dd/MM/yyyy"),73,94),p("\xe0 "+this._timeBackPipe.transform(this._varGlobal.setting.timeback,2),311,94),p("(Date et heure de d\xe9but de sortie \xe0 mentionner obligatoirement)",73,78)}else{let t=r.getPage(d-1),e=110;this.page=g,t.drawPage(c,Object.assign(Object.assign({},f),{x:t.getWidth()-f.width+60,y:t.getHeight()-f.height-660}));const i=r.addPage();i.drawPage(c,Object.assign(Object.assign({},m),{x:i.getWidth()-m.width+80,y:i.getHeight()-m.height-50}));const a=this._varGlobal.setting.firstname+" "+this._varGlobal.setting.lastname,n=this._varGlobal.setting.adress+" "+this._varGlobal.setting.zipcode+" "+this._varGlobal.setting.city,o=this._datePipe.transform(this._varGlobal.setting.dateOfBirth,"dd/MM/yyyy").toString();p(a,e,516),p(o,e,501),p(this._varGlobal.setting.cityofbird,220,501),p(n,e+17,488),this.page=t,p("Fait \xe0 ",73,113),p(this._varGlobal.setting.city,106,113),p("Le "+this._datePipe.transform(this.toDay,"dd/MM/yyyy"),73,94),p("\xe0 "+this._timeBackPipe.transform(this._varGlobal.setting.timeback,2),311,94),p("(Date et heure de d\xe9but de sortie \xe0 mentionner obligatoirement)",73,78)}let u=null;switch(e){case 1:u=505;break;case 2:u=471;break;case 3:u=437;break;case 4:u=404;break;case 5:u=383;break;case 6:u=338;break;case 7:u=305;break;case 8:u=270;break;case 9:u=230;break;case 10:u=185;break;case 11:u=115;break;case 12:u=70;break;case 21:u=292;break;case 22:u=170;break;case 23:u=86;break;case 24:u=707;break;case 25:u=650;break;case 26:u=554;break;case 27:u=458;break;case 28:u=403;break;case 29:u=349;break;case 30:u=307;break;case 31:u=239;break;case 32:u=170}e>20&&e<=23?(h=60,this.page=g,p("x",h,75+u,12)):e>23?(h=60,p("x",h,75+u,12)):p("x",h,75+u,12);const v=yield r.save(),y=new Blob([v],{type:"application/pdf"}),k=window.URL.createObjectURL(y),_=yield this.modalCtrl.create({component:b,cssClass:"my-custom-class",keyboardClose:!0,componentProps:{pdfUrl:k}});return yield _.present()})}}return t.\u0275fac=function(e){return new(e||t)(n.Tb(r.a),n.Tb(o.G),n.Tb(h.d),n.Tb(g.a),n.Tb(s.a))},t.\u0275prov=n.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m=(()=>{class t{constructor(t,e,i,a){this._pdflib=t,this.loadingController=e,this.loading=i,this._varGlobal=a,this.pdfMake=null,this.qrCodeData=null}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){if(!this.pdfMake){const t=yield i.e(4).then(i.t.bind(null,"5JmO",7)),e=yield i.e(79).then(i.t.bind(null,"TruH",7));this.pdfMake=t.default,this.pdfMake.vfs=e.default.pdfMake.vfs}})}generatePdf(t,e,n){return Object(a.a)(this,void 0,void 0,function*(){const a={content:[{qr:"Cree le : "+n.toDayFr+" a "+n.timeBackH+";\nNom : "+this._varGlobal.setting.lastname+";\nPrenom: "+this._varGlobal.setting.firstname+";\nNaissance: "+n.dateOfBirth+" a "+this._varGlobal.setting.cityofbird+";\nAdresse: "+this._varGlobal.setting.adress+" "+this._varGlobal.setting.zipcode+" "+this._varGlobal.setting.city+" ;\nSortie: "+n.toDayFr+" a "+n.timeBackColon+";\nMotifs: "+e+";"}]};if(!this.pdfMake){const t=yield i.e(4).then(i.t.bind(null,"5JmO",7));this.pdfMake=t.default}this.pdfMake.createPdf(a).getBase64(e=>{this._pdflib.modifyPdf(e,t)})})}}return t.\u0275fac=function(e){return new(e||t)(n.Tb(f),n.Tb(o.F),n.Tb(s.a),n.Tb(r.a))},t.\u0275prov=n.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("Gm54");let u=(()=>{class t{constructor(t,e,i,a,n,o,s,r,c,l){this._routerOutlet=t,this._pdfMake=e,this._varGlobal=i,this._datePipe=a,this._timeBackPipe=n,this._activityPipe=o,this.loadingController=s,this.loadingService=r,this.modalCtrl=c,this.modalController=l}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){this.loadingService.hide()})}attestation(t){return Object(a.a)(this,void 0,void 0,function*(){const e={year:"numeric",month:"long",day:"2-digit"},i=new Date;let a,n;a=this._datePipe.transform(i,"dd/MM/yyyy"),n=i.toLocaleDateString("fr-FR",e);let o,s=new Date(this._varGlobal.setting.dateOfBirth);o=s.toLocaleDateString("fr-FR",e);let r=null,c=null,d=null;c=this._timeBackPipe.transform(this._varGlobal.setting.timeback,1),r=this._timeBackPipe.transform(this._varGlobal.setting.timeback,2),d=this._timeBackPipe.transform(this._varGlobal.setting.timeback,3);const b=this._activityPipe.transform(t);if(1===this._varGlobal.setting.screenmode){const t=yield this.modalCtrl.create({component:l,cssClass:"my-custom-class",keyboardClose:!0,componentProps:{activityName:b,dateOfBirth:s,dateOfBirthFrLong:o,toDayFr:a,toDayFrLong:n,timeBackT:d,timeBackH:c,timeBackColon:r}});return yield t.present()}{const e={toDayFr:a,toDayFrLong:n,dateOfBirth:s,dateOfBirthFrLong:o,timeBackColon:r,timeBackH:c,timeBackT:d};this.loadingService.showSansMinuteur(),this._pdfMake.generatePdf(t,b,e)}})}closeModal(){this.modalCtrl.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(n.Kb(o.u),n.Kb(m),n.Kb(r.a),n.Kb(h.d),n.Kb(g.a),n.Kb(p.a),n.Kb(o.F),n.Kb(s.a),n.Kb(o.G),n.Kb(o.G))},t.\u0275cmp=n.Eb({type:t,selectors:[["app-attestation"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})()},kiQV:function(t){t.exports=JSON.parse('{"a":"2.1.3"}')}}]);