(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{ldUD:function(t,e,i){"use strict";i.r(e),i.d(e,"WelcomeModule",function(){return y});var n=i("ofXK"),o=i("TEn/"),a=i("tyNb"),s=i("mrSG"),r=i("kiQV"),c=i("fXoL"),b=i("2hsb"),l=i("ogpO"),d=i("OvJz"),h=i("Gm54"),u=i("IkSl"),f=i("gZKt");let g=(()=>{class t{constructor(t,e,i,n){this.loadingController=t,this.pdfviewer=e,this.modalCtrl=i,this.loadingservice=n}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){})}pageRendered(t){this.loadingservice.hide()}closeModal(){this.modalCtrl.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(o.y),c.Hb(u.b),c.Hb(o.z),c.Hb(f.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["pdfviewer"]],inputs:{pdfUrl:"pdfUrl"},decls:4,vars:5,consts:[[1,"ion-page"],["color","black",3,"click"],["size","large","name","close-circle-outline"],[3,"src","render-text","show-all","original-size","autoresize","page-rendered"]],template:function(t,e){1&t&&(c.Mb(0,"div",0),c.Mb(1,"ion-buttons",1),c.Tb("click",function(){return e.closeModal()}),c.Ib(2,"ion-icon",2),c.Lb(),c.Mb(3,"pdf-viewer",3),c.Tb("page-rendered",function(t){return e.pageRendered(t)}),c.Lb(),c.Lb()),2&t&&(c.xb(3),c.Yb("src",e.pdfUrl)("render-text",!1)("show-all",!0)("original-size",!1)("autoresize",!0))},directives:[o.c,o.i,u.a],styles:[".ion-page[_ngcontent-%COMP%]{background-color:#fff}.ion-page[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{font-size:large;position:absolute;color:transparent}.ion-page[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:grey}.ion-page[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%]{display:block;height:100vh}"]}),t})();i("gcOT");let p=(()=>{class t{constructor(t,e,i,n,o){this._varGlobal=t,this.modalCtrl=e,this._datepipe=i,this._timeBackPipe=n,this.loading=o,this.toDay=new Date}modifyPdf(t,e){return Object(s.a)(this,void 0,void 0,function*(){const n=yield i.e(13).then(i.bind(null,"4Zil")).then(({PDFDocument:t,StandardFonts:e})=>({PDFDocument:t,StandardFonts:e})),o=yield fetch("./assets/certificate.33362af4.pdf").then(t=>t.arrayBuffer()),a=t,s=yield n.PDFDocument.load(o),[r]=yield s.embedPdf(a),c=yield s.embedFont(n.StandardFonts.Helvetica),b=s.getPage(0),l=r.scale(.3);b.drawPage(r,Object.assign(Object.assign({},l),{x:b.getWidth()-l.width+60,y:b.getHeight()-l.height-90}));const d=r.scale(1.1),h=s.addPage();h.drawPage(r,Object.assign(Object.assign({},d),{x:h.getWidth()-d.width+80,y:h.getHeight()-d.height-50}));const u=s.getPages()[0],f=(u.getSize(),(t,e,i,n=11)=>{u.drawText(t,{x:e,y:i,size:n,font:c})});s.setTitle("COVID-19 - D\xe9claration de d\xe9placement");const p=this._varGlobal.setting.firstname+" "+this._varGlobal.setting.lastname,m=this._varGlobal.setting.adress+" "+this._varGlobal.setting.zipcode+" "+this._varGlobal.setting.city,M=this._datepipe.transform(this._varGlobal.setting.dateofbirth,"dd/MM/yyyy").toString();switch(f(p,148,704),f(M,148,684),f(this._varGlobal.setting.cityofbird,311,684),f(m,152,667),e){case 1:f("x",73,580,12);break;case 2:f("x",73,546,12);break;case 3:f("x",73,512,12);break;case 4:f("x",73,479,12);break;case 5:f("x",73,458,12);break;case 6:f("x",73,437,12);break;case 7:f("x",73,403,12);break;case 8:f("x",73,370,12);break;case 9:f("x",73,305,12);break;case 10:f("x",73,260,12);break;case 11:f("x",73,190,12);break;case 12:f("x",73,145,12)}f(this._varGlobal.setting.city,106,113),f(this._datepipe.transform(this.toDay,"dd/MM/yyyy"),92,94),f(this._timeBackPipe.transform(this._varGlobal.setting.timeback,2),311,94);const k=yield s.save(),y=new Blob([k],{type:"application/pdf"}),v=window.URL.createObjectURL(y),_=yield this.modalCtrl.create({component:g,cssClass:"my-custom-class",keyboardClose:!0,componentProps:{pdfUrl:v}});return yield _.present()})}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(l.a),c.Pb(o.z),c.Pb(n.d),c.Pb(d.a),c.Pb(f.a))},t.\u0275prov=c.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m=(()=>{class t{constructor(t,e,i,n,o,a,s){this._varGlobal=t,this._datepipe=e,this._timeBackPipe=i,this._activityPipe=n,this._pdflib=o,this.loadingController=a,this.loading=s,this.pdfMake=null,this.dateofbirth=null,this.toDay=new Date,this.timebackColon=null,this.timebackH=null,this.timebackT=null,this.qrCodeData=null}generatePdf(t){return Object(s.a)(this,void 0,void 0,function*(){this.timebackH=this._timeBackPipe.transform(this._varGlobal.setting.timeback,1),this.timebackColon=this._timeBackPipe.transform(this._varGlobal.setting.timeback,2),this.timebackT=this._timeBackPipe.transform(this._varGlobal.setting.timeback,3),this.toDayFr=this._datepipe.transform(this.toDay,"dd/MM/yyyy"),this.dateofbirth=this._datepipe.transform(this._varGlobal.setting.dateofbirth,"dd/MM/yyyy"),this.loading.show(),yield this.exportPdf(t)})}documentDefinition(t){return{content:[{qr:t}]}}qrCode(t){const e=this._activityPipe.transform(t);return this.qrCodeData="Cree le : "+this.toDayFr+" a "+this.timebackH+";\nNom : "+this._varGlobal.setting.lastname+";\nPrenom: "+this._varGlobal.setting.firstname+";\nNaissance: "+this.dateofbirth+" a "+this._varGlobal.setting.cityofbird+";\nAdresse: "+this._varGlobal.setting.adress+" "+this._varGlobal.setting.zipcode+" "+this._varGlobal.setting.city+" ;\nSortie: "+this.toDayFr+" a "+this.timebackColon+";\nMotifs: "+e+";"}exportPdf(t){return Object(s.a)(this,void 0,void 0,function*(){const e=this.documentDefinition(this.qrCode(t));if(!this.pdfMake){const t=yield i.e(3).then(i.t.bind(null,"5JmO",7));this.pdfMake=t.default}this.pdfMake.createPdf(e).getBase64(e=>{this._pdflib.modifyPdf(e,t)})})}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(l.a),c.Pb(n.d),c.Pb(d.a),c.Pb(h.a),c.Pb(p),c.Pb(o.y),c.Pb(f.a))},t.\u0275prov=c.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const M=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this._router=t,this._storage=e,this._pdfmake=i,this.loading=n,this.version=r.a}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){if(this._storage.readLocal("setok")||this._router.navigate(["tabs/settings"]),!this.pdfMake){const t=yield i.e(3).then(i.t.bind(null,"5JmO",7)),e=yield i.e(77).then(i.t.bind(null,"TruH",7));this.pdfMake=t.default,this.pdfMake.vfs=e.default.pdfMake.vfs}})}ionViewDidEnter(){this.loading.hide()}launchAttestation(t){this.loading.show(),this._storage.saveOnLine(t),this._pdfmake.generatePdf(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(a.e),c.Hb(b.a),c.Hb(m),c.Hb(f.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-welcome"]],decls:53,vars:1,consts:[["color","primary"],[1,"ion-align-items-stretch"],["expand","block","fill","outline",3,"click"],["Expand","block","fill","outline",3,"click"]],template:function(t,e){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-title"),c.gc(2),c.Lb(),c.Lb(),c.Mb(3,"ion-content",1),c.Mb(4,"ion-grid"),c.Mb(5,"ion-row"),c.Mb(6,"ion-col"),c.Mb(7,"ion-button",2),c.Tb("click",function(){return e.launchAttestation(1)}),c.gc(8,"n\xb0 1 Travail"),c.Lb(),c.Lb(),c.Lb(),c.Mb(9,"ion-row"),c.Mb(10,"ion-col"),c.Mb(11,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(2)}),c.gc(12,"n\xb0 2 Sant\xe9e "),c.Lb(),c.Lb(),c.Lb(),c.Mb(13,"ion-row"),c.Mb(14,"ion-col"),c.Mb(15,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(3)}),c.gc(16,"n\xb0 3 Famille"),c.Lb(),c.Lb(),c.Lb(),c.Mb(17,"ion-row"),c.Mb(18,"ion-col"),c.Mb(19,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(4)}),c.gc(20,"n\xb0 4 Handicap"),c.Lb(),c.Lb(),c.Lb(),c.Mb(21,"ion-row"),c.Mb(22,"ion-col"),c.Mb(23,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(5)}),c.gc(24,"n\xb0 5 Convocation"),c.Lb(),c.Lb(),c.Lb(),c.Mb(25,"ion-row"),c.Mb(26,"ion-col"),c.Mb(27,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(6)}),c.gc(28,"n\xb0 6 Mission"),c.Lb(),c.Lb(),c.Lb(),c.Mb(29,"ion-row"),c.Mb(30,"ion-col"),c.Mb(31,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(7)}),c.gc(32,"n\xb0 7 Transit"),c.Lb(),c.Lb(),c.Lb(),c.Mb(33,"ion-row"),c.Mb(34,"ion-col"),c.Mb(35,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(8)}),c.gc(36,"n\xb0 8 Animaux 1h"),c.Lb(),c.Lb(),c.Lb(),c.Mb(37,"ion-row"),c.Mb(38,"ion-col"),c.Mb(39,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(9)}),c.gc(40,"n\xb0 9 Courses 6h-18h"),c.Lb(),c.Lb(),c.Lb(),c.Mb(41,"ion-row"),c.Mb(42,"ion-col"),c.Mb(43,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(10)}),c.gc(44,"n\xb0 10 Sport 6h-18h"),c.Lb(),c.Lb(),c.Lb(),c.Mb(45,"ion-row"),c.Mb(46,"ion-col"),c.Mb(47,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(11)}),c.gc(48,"n\xb0 11 Rassemlement 6h-18h"),c.Lb(),c.Lb(),c.Lb(),c.Mb(49,"ion-row"),c.Mb(50,"ion-col"),c.Mb(51,"ion-button",3),c.Tb("click",function(){return e.launchAttestation(12)}),c.gc(52,"n\xb0 12 D\xe9marches 6h-18h"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.xb(2),c.hc("CovAttest ",e.version,""))},directives:[o.h,o.v,o.e,o.g,o.o,o.d,o.b],styles:["ion-header[_ngcontent-%COMP%]{margin:15px 0;text-align:center}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#878888}ion-button[_ngcontent-%COMP%]{font-size:larger}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(M)],a.g]}),t})(),y=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[n.b,k,o.x]]}),t})()}}]);